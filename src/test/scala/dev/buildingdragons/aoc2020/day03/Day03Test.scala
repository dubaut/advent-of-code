package dev.buildingdragons.aoc2020.day03

import dev.buildingdragons.aoc2020.day03.Day03.{countTrees, createMap}
import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.must.Matchers

class Day03Test extends AnyFlatSpec with Matchers {
  "createMap" must "create a full map." in {
    val input = List(
      "..##.......",
      "#...#...#..",
      ".#....#..#.",
      "..#.#...#.#",
      ".#...##..#.",
      "..#.##.....",
      ".#.#.#....#",
      ".#........#",
      "#.##...#...",
      "#...##....#",
      ".#..#...#.#"
    )

    val expected = List(
      "..##.........##.........##.........##.......",
      "#...#...#..#...#...#..#...#...#..#...#...#..",
      ".#....#..#..#....#..#..#....#..#..#....#..#.",
      "..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#",
      ".#...##..#..#...##..#..#...##..#..#...##..#.",
      "..#.##.......#.##.......#.##.......#.##.....",
      ".#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#",
      ".#........#.#........#.#........#.#........#",
      "#.##...#...#.##...#...#.##...#...#.##...#...",
      "#...##....##...##....##...##....##...##....#",
      ".#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#"
    )

    assertResult(expected) {
      val actual = createMap(input, 4)
      actual
    }
  }

  "countTrees" must "return the number of encountered trees." in {
    val map = List(
      "..##.........##.........##.........##.......",
      "#...#...#..#...#...#..#...#...#..#...#...#..",
      ".#....#..#..#....#..#..#....#..#..#....#..#.",
      "..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#",
      ".#...##..#..#...##..#..#...##..#..#...##..#.",
      "..#.##.......#.##.......#.##.......#.##.....",
      ".#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#",
      ".#........#.#........#.#........#.#........#",
      "#.##...#...#.##...#...#.##...#...#.##...#...",
      "#...##....##...##....##...##....##...##....#",
      ".#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#"
    )

    assertResult(7) {
      countTrees(map)
    }
  }
}